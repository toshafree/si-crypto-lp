<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Криптоскринер для межбиржевого арбитража</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Криптоскринер для межбиржевого арбитража: расхождения между биржами, фандинг, история спреда и готовые сигналы. Бета-версия — бесплатно." />
  <style>
    :root {
      --bg: #050712;
      --bg-soft: #0b0f1f;
      --card: #101528;
      --accent: #4f46e5;
      --accent-soft: rgba(79, 70, 229, 0.12);
      --accent-strong: rgba(129, 140, 248, 0.3);
      --text: #f9fafb;
      --muted: #9ca3af;
      --border: #1f2933;
      --radius-lg: 18px;
      --radius-xl: 22px;
      --shadow-soft: 0 24px 80px rgba(0, 0, 0, 0.6);
      --max-width: 1120px;
      color-scheme: dark;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #151c35 0, #03030a 55%, #010006 100%);
      color: var(--text);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container {
      width: 100%;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 20px;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(16px);
      background: linear-gradient(to bottom, rgba(5, 7, 18, 0.94), rgba(5, 7, 18, 0.6), transparent);
      border-bottom: 1px solid rgba(31, 41, 55, 0.7);
    }

    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-mark {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      box-shadow: none;
    }

    .logo-mark svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    .logo-text-main {
      font-weight: 600;
      font-size: 16px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .logo-text-sub {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .nav-links {
      display: flex;
      gap: 18px;
      align-items: center;
      font-size: 14px;
      color: var(--muted);
    }

    .nav-links a {
      padding: 6px 0;
      border-bottom: 1px solid transparent;
    }

    .nav-links a:hover {
      color: #e5e7eb;
      border-bottom-color: rgba(148, 163, 184, 0.4);
    }

    .nav-cta {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .btn {
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 14px;
      font-weight: 500;
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
      background: transparent;
      color: var(--text);
    }

    .btn-primary {
      background: radial-gradient(circle at 10% 0, #c4b5fd 0, #4f46e5 40%, #1d4ed8 100%);
      border-color: rgba(191, 219, 254, 0.4);
      box-shadow: 0 16px 40px rgba(129, 140, 248, 0.7);
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      transform: translateY(-0.5px);
    }

    .btn-ghost {
      border-color: rgba(75, 85, 99, 0.7);
      background: rgba(15, 23, 42, 0.7);
      color: #e5e7eb;
    }

    .btn-ghost:hover {
      border-color: rgba(148, 163, 184, 0.9);
      background: rgba(15, 23, 42, 0.95);
    }

    /* Hero */

    .hero {
      padding: 70px 0 52px;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 46px;
      align-items: center;
    }

    .hero-pre {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--muted);
      margin-bottom: 12px;
    }

    .hero-title {
      font-size: clamp(32px, 5vw, 44px);
      line-height: 1.05;
      font-weight: 700;
      letter-spacing: -0.04em;
      margin-bottom: 16px;
    }

    .hero-title span.accent {
      background: linear-gradient(to right, #a5b4fc, #38bdf8, #22c55e);
      -webkit-background-clip: text;
      color: transparent;
      display: inline-block;
    }

    .hero-subtitle {
      font-size: 16px;
      line-height: 1.6;
      color: #e5e7eb;
      max-width: 520px;
      margin-bottom: 26px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      margin-bottom: 4px;
    }

    /* hero right: bubbles */

    .hero-visual {
      position: relative;
      min-height: 320px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .bubble-stage {
      position: relative;
      width: 100%;
      max-width: 470px;
      aspect-ratio: 470 / 327;
      overflow: hidden;
    }

    svg {
      display: block;
      width: 100%;
      height: 100%;
    }

    .bubble-node text {
      pointer-events: none;
      user-select: none;
      font-family: inherit;
    }

    .diff-text {
      text-anchor: middle;
      fill: #e5e7eb;
    }

    .symbol-text {
      text-anchor: middle;
      fill: #e5e7eb;
      letter-spacing: 0.08em;
    }

    .icons-group image,
    .icons-group .icon-fallback {
      width: 16px;
      height: 16px;
    }

    .icon-fallback {
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e5e7eb;
      text-transform: uppercase;
    }

    /* Sections */

    section {
      padding: 32px 0;
    }

    .section-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .section-title {
      font-size: 24px;
      margin-bottom: 10px;
      letter-spacing: -0.02em;
    }

    .section-subtitle {
      font-size: 14px;
      color: var(--muted);
      max-width: 560px;
      margin-bottom: 20px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 22px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 18px;
    }

    .card {
      border-radius: var(--radius-lg);
      padding: 18px 18px 16px;
      background: linear-gradient(145deg, rgba(15,23,42,0.98), rgba(15,23,42,0.96));
      border: 1px solid rgba(31, 41, 55, 0.96);
      box-shadow: 0 14px 40px rgba(0, 0, 0, 0.5);
    }

    .card-soft {
      background: linear-gradient(135deg, rgba(15,23,42,0.96), rgba(15,23,42,0.94));
      border-color: rgba(31,41,55,0.9);
    }

    .card-accent {
      background: radial-gradient(circle at top left, rgba(79, 70, 229, 0.28), rgba(15,23,42,0.99));
      border-color: rgba(129, 140, 248, 0.6);
    }

    .card-title {
      font-size: 16px;
      margin-bottom: 6px;
    }

    .card-text {
      font-size: 14px;
      color: #d0d3d9;
      line-height: 1.5;
    }

    .card-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .card-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.9);
    }

    /* Stats-like blocks */

    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 14px;
    }

    .stat {
      padding: 14px 14px 12px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(31, 41, 55, 0.95);
      text-align: left;
    }

    .stat-value {
      font-size: 19px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.17em;
      color: var(--muted);
    }

    .stat-note {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    /* Deals list (старый, если понадобится ещё где-то) */

    .list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 13px;
      color: var(--muted);
    }

    .list li {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      padding: 6px 0;
      border-bottom: 1px dashed rgba(31, 41, 55, 0.85);
    }

    .list li:last-child {
      border-bottom: none;
    }

    .list-label {
      color: #e5e7eb;
    }

    /* CTA */

    .cta {
      margin-top: 50px;
      margin-bottom: 74px;
    }

    .cta-inner {
      border-radius: 20px;
      padding: 22px 20px 20px;
      background: radial-gradient(circle at top left, rgba(129, 140, 248, 0.4), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(129, 140, 248, 0.75);
      box-shadow: 0 20px 60px rgba(55, 65, 81, 0.9);
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      align-items: center;
      justify-content: space-between;
    }

    .cta-text-main {
      font-size: 18px;
      margin-bottom: 4px;
    }

    .cta-text-sub {
      font-size: 13px;
      color: #e5e7eb;
      max-width: 420px;
    }

    .cta-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .badge-free {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(191, 219, 254, 0.7);
      color: #bfdbfe;
    }

    /* Биржевая таблица в блоке беты */

    .exch-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      color: var(--muted);
    }

    .exch-table th,
    .exch-table td {
      padding: 6px 4px;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
      vertical-align: middle;
    }

    .exch-table th {
      text-align: left;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #6b7280;
    }

    .exch-exchange-cell {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .exch-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      object-fit: cover;
      background: radial-gradient(circle at 30% 0,
        rgba(248, 250, 252, 0.8) 0,
        rgba(30, 64, 175, 0.9) 45%,
        rgba(15, 23, 42, 1) 100%);
      box-shadow:
        0 0 0 2px rgba(15, 23, 42, 1),
        0 10px 25px rgba(15, 23, 42, 0.9);
    }

    .exch-type {
      white-space: nowrap;
    }

    .exch-count {
      text-align: right;
      white-space: nowrap;
      color: #e5e7eb;
      font-variant-numeric: tabular-nums;
    }

    .beta-list {
      margin: 0;
      padding-left: 18px;
      font-size: 14px;
      color: #e5e7eb;;
      line-height: 1.6;
    }

    .beta-list li + li {
      margin-top: 6px;
    }
	
	.func-item .icon {
	  width: 32px;
	  height: 32px;
	  fill: white;
	  opacity: 0.9;
	}

    /* Статистика: контролы и матрица */

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 32px;
      padding: 16px 18px;
      margin-bottom: 20px;
      border-radius: 16px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: radial-gradient(circle at top left,
        rgba(15, 23, 42, 0.95) 0,
        rgba(15, 23, 42, 0.9) 35%,
        rgba(15, 23, 42, 0.98) 100%);
      box-shadow: 0 12px 35px rgba(15, 23, 42, 0.9);
    }

    .control {
      flex: 1 1 260px;
    }

    .control-label {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 14px;
      margin-bottom: 4px;
    }

    .control-label span.value {
      font-variant-numeric: tabular-nums;
      color: #bfdbfe;
      font-size: 13px;
    }

    input[type="range"] {
      width: 100%;
      appearance: none;
      height: 6px;
      border-radius: 999px;
      background: rgba(30, 64, 175, 0.6);
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 10% 0, #c4b5fd 0, #4f46e5 40%, #1d4ed8 100%);
      border: 1px solid rgba(191, 219, 254, 0.7);
      box-shadow:
        0 0 0 4px rgba(59, 130, 246, 0.35),
        0 10px 25px rgba(37, 99, 235, 0.9);
      cursor: pointer;
      margin-top: -5px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: radial-gradient(circle at 10% 0, #c4b5fd 0, #4f46e5 40%, #1d4ed8 100%);
      border: 1px solid rgba(191, 219, 254, 0.7);
      box-shadow:
        0 0 0 4px rgba(59, 130, 246, 0.35),
        0 10px 25px rgba(37, 99, 235, 0.9);
      cursor: pointer;
    }

    input[type="range"]::-moz-range-track {
      height: 6px;
      border-radius: 999px;
      background: rgba(30, 64, 175, 0.6);
    }

    .matrix-wrapper {
      margin-top: 10px;
      overflow: auto;
      border-radius: 18px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      background: radial-gradient(circle at top left,
        rgba(15, 23, 42, 0.98) 0,
        rgba(15, 23, 42, 0.98) 40%,
        rgba(15, 23, 42, 0.99) 100%);
      box-shadow:
        inset 0 0 40px rgba(15, 23, 42, 0.95),
        0 20px 60px rgba(15, 23, 42, 1);
    }

    table.matrix {
      border-collapse: collapse;
      width: 100%;
      min-width: 500px;
      font-size: 13px;
      table-layout: fixed;
    }

    .matrix thead th {
      position: sticky;
      top: 0;
      z-index: 3;
      background: radial-gradient(circle at top,
        rgba(15, 23, 42, 1) 0,
        rgba(15, 23, 42, 0.98) 60%,
        rgba(15, 23, 42, 0.98) 100%);
      padding: 8px 8px;
      border-bottom: 1px solid rgba(51, 65, 85, 0.9);
      text-align: center;
      white-space: nowrap;
    }

    .matrix thead th.corner {
      left: 0;
      z-index: 4;
      border-right: 1px solid rgba(51, 65, 85, 0.9);
    }

    .matrix th.row-header {
      position: sticky;
      left: 0;
      z-index: 2;
      background: rgba(15, 23, 42, 0.98);
      border-right: 1px solid rgba(51, 65, 85, 0.9);
      padding: 8px 10px;
      text-align: left;
      white-space: nowrap;
    }

    .matrix th.corner,
    .matrix th.row-header {
      width: 30%;
      max-width: 30%;
    }

    .matrix td {
      border: 1px solid rgba(30, 41, 59, 0.8);
      padding: 6px 6px;
      text-align: center;
      width: 70px;
      height: 64px;
      vertical-align: middle;
      position: relative;
    }

    .exchange-label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    .exchange-label span {
      font-size: 15px;
    }

    .exchange-icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      object-fit: cover;
      box-shadow:
        0 0 0 2px rgba(15, 23, 42, 1),
        0 10px 25px rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at 30% 0,
        rgba(248, 250, 252, 0.8) 0,
        rgba(30, 64, 175, 0.9) 45%,
        rgba(15, 23, 42, 1) 100%);
    }

    .bubble-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
    }

    .bubble {
      display: flex;
      align-items: center;
      justify-content: center;
      font-variant-numeric: tabular-nums;
      font-size: 16px;
      color: #e5e7eb;
      border-radius: 999px;
      border-width: 1px;
      border-style: solid;
      box-sizing: border-box;
      background: radial-gradient(circle at 10% 0,
        #c4b5fd 0, #4f46e5 40%, #1d4ed8 100%);
      border-color: rgba(191, 219, 254, 0.4);
      box-shadow: 0 16px 40px rgba(129, 140, 248, 0.7);
      transition:
        width 0.35s ease,
        height 0.35s ease,
        transform 0.35s ease,
        opacity 0.25s ease;
      will-change: width, height, transform, opacity;
    }

    .bubble.empty {
      opacity: 0;
      transform: scale(0.3);
    }

    .bubble:not(.empty) {
      opacity: 1;
    }

    .stats-caption {
      margin-top: 10px;
      font-size: 11px;
      color: var(--muted);
    }

    /* EXPERIENCE SLIDER (Опыт использования) */

    .experience-slider {
      margin-top: 18px;
    }

    .experience-slider .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 8px;
    }

    .experience-slider .tab-btn {
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 12px;
      padding: 4px 10px;
      cursor: pointer;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.15s ease;
    }

    .experience-slider .tab-btn:hover {
      background: rgba(37, 99, 235, 0.9);
      border-color: #3b82f6;
      transform: translateY(-1px);
    }

    .experience-slider .tab-btn.active {
      background: #4f46e5;
      border-color: #a855f7;
    }

    .slider-container {
      position: relative;
      overflow: hidden;
      border-radius: 16px;
      border: 1px solid #1f2937;
      background: radial-gradient(circle at top, #0b1120 0, #020617 55%);
    }

    .slides-wrapper {
      display: flex;
      transition: transform 0.3s ease;
      width: 100%;
    }

    .slide {
      min-width: 100%;
      padding: 16px 24px 24px;
      display: flex;
      gap: 16px;
      align-items: stretch;
    }

    .slide-left,
    .slide-right {
      flex: 1 1 0;
      display: flex;
      flex-direction: column;
    }

    .slide-right {
      border-left: 1px solid #1f2937;
      padding-left: 16px;
    }

    .chart-container {
      flex: 1;
      width: 100%;
      border-radius: 12px;
      border: 1px solid rgba(17, 24, 39, 0.9);
      background: #000000;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.9);
      overflow: hidden;
    }

    .deal-header {
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 8px;
    }

    .deal-symbol {
      font-size: 22px;
      font-weight: 600;
      margin: 0;
    }

    .deal-roi-block {
      text-align: right;
    }

    .deal-roi-main {
      font-size: 22px;
      font-weight: 600;
      line-height: 1;
    }

    .deal-roi-label {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 2px;
    }

    .experience-slider table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .experience-slider th,
    .experience-slider td {
      padding: 8px 10px;
      border-bottom: 1px solid #1f2937;
      height: 36px;
      vertical-align: middle;
    }

    .experience-slider th {
      text-align: left;
      font-weight: 500;
      color: #9ca3af;
      font-size: 12px;
    }

    .experience-slider tr:last-child td {
      border-bottom: none;
    }

    .experience-slider .param-name {
      white-space: nowrap;
    }

    .experience-slider .overall-row td {
      border-top: 1px solid #1f2937;
    }

    .experience-slider .emphasis-value {
      font-size: 16px;
      font-weight: 600;
    }

    .slider-controls {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .slider-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      pointer-events: auto;
      transition: background 0.15s ease, transform 0.15s ease, opacity 0.15s ease;
    }

    .slider-button:hover {
      background: rgba(30, 64, 175, 0.95);
      transform: translateY(-50%) scale(1.05);
    }

    .slider-button[disabled] {
      opacity: 0.35;
      cursor: default;
      background: rgba(15, 23, 42, 0.7);
      transform: translateY(-50%) scale(1.0);
    }

    .slider-button.prev {
      left: 8px;
    }

    .slider-button.next {
      right: 8px;
    }

    .slide-index {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: #9ca3af;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      pointer-events: none;
    }

    .experience-slider .no-data {
      font-size: 13px;
      color: #e5e7eb;
      padding: 8px;
    }

    /* Footer */

    footer {
      border-top: 1px solid rgba(31, 41, 55, 0.9);
      padding: 16px 0 18px;
      margin-top: auto;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.85), rgba(3, 7, 18, 1));
    }

    .footer-inner {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      font-size: 12px;
      color: var(--muted);
    }

    .footer-links {
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--muted);
    }

    .footer-links a:hover {
      color: #e5e7eb;
    }

    /* Responsive */

    @media (max-width: 900px) {
      .hero-grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero {
        padding-top: 46px;
      }
      .hero-visual {
        order: -1;
      }
      .nav-links {
        display: none;
      }
      .stats-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid-3 {
        grid-template-columns: minmax(0, 1fr);
      }
      .grid-2 {
        grid-template-columns: minmax(0, 1fr);
      }
      .slide {
        flex-direction: column;
      }
      .slide-right {
        border-left: none;
        border-top: 1px solid #1f2937;
        padding-left: 0;
        padding-top: 12px;
      }
      .chart-container {
        height: 260px;
      }
    }

    @media (max-width: 640px) {
      .stats-row {
        grid-template-columns: minmax(0, 1fr);
      }
      .hero-actions {
        flex-direction: column;
        align-items: stretch;
      }
      .cta-inner {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
  <script src="//code.jivo.ru/widget/KNUCXaIKOS" async=""></script>
  <link rel="stylesheet" href="https://code.jivo.ru/css/13ea1e6/widget.css" class="jv-css">
  <link rel="stylesheet" type="text/css" href="https://code.jivo.ru/css/13ea1e6/chatcontainer.widget.css">
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
      (function(m,e,t,r,i,k,a){
          m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
          m[i].l=1*new Date();
          for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
          k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
      })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105484818', 'ym');

      ym(105484818, 'init', {ssr:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/105484818" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->
</head>
<body>
  <div class="page">
    <header>
      <div class="container">
        <div class="nav">
          <div class="logo">
            <div class="logo-mark">
              <svg viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M37.3047 28.6527C37.1115 26.9382 36.3146 25.6101 34.9141 24.6683C33.5135 23.7145 31.7507 23.2376 29.6257 23.2376C28.1044 23.2376 26.7884 23.479 25.6776 23.962C24.5668 24.4329 23.7035 25.0849 23.0877 25.918C22.484 26.739 22.1822 27.6747 22.1822 28.7251C22.1822 29.6065 22.3874 30.3672 22.7979 31.0071C23.2205 31.647 23.7699 32.1843 24.446 32.619C25.1342 33.0415 25.8707 33.3977 26.6555 33.6875C27.4403 33.9652 28.195 34.1946 28.9194 34.3757L32.5415 35.3175C33.7248 35.6072 34.9382 35.9996 36.1818 36.4947C37.4254 36.9897 38.5785 37.6417 39.641 38.4506C40.7035 39.2596 41.5607 40.2617 42.2127 41.457C42.8768 42.6523 43.2088 44.0831 43.2088 45.7493C43.2088 47.8501 42.6655 49.7156 41.5788 51.3455C40.5043 52.9755 38.9407 54.2614 36.8881 55.2031C34.8477 56.1449 32.3786 56.6158 29.4808 56.6158C26.7038 56.6158 24.3011 56.1751 22.2727 55.2937C20.2443 54.4123 18.6566 53.1626 17.5096 51.5447C16.3626 49.9148 15.7287 47.983 15.608 45.7493H21.2223C21.331 47.0895 21.7656 48.2063 22.5263 49.0998C23.299 49.9812 24.283 50.6392 25.4783 51.0739C26.6857 51.4964 28.0078 51.7077 29.4446 51.7077C31.0263 51.7077 32.4329 51.4602 33.6644 50.9652C34.908 50.4581 35.886 49.7578 36.5984 48.8643C37.3107 47.9588 37.6669 46.9023 37.6669 45.695C37.6669 44.5962 37.353 43.6967 36.7251 42.9964C36.1094 42.2962 35.2702 41.7166 34.2077 41.2578C33.1573 40.799 31.968 40.3945 30.6399 40.0444L26.2571 38.8491C23.2869 38.0401 20.9325 36.8509 19.1939 35.2812C17.4673 33.7116 16.604 31.6349 16.604 29.0511C16.604 26.9141 17.1836 25.0486 18.3427 23.4549C19.5018 21.8611 21.0714 20.6236 23.0515 19.7422C25.0316 18.8487 27.2653 18.402 29.7525 18.402C32.2638 18.402 34.4794 18.8427 36.3991 19.7241C38.331 20.6055 39.8523 21.8189 40.9631 23.3643C42.0739 24.8977 42.6534 26.6605 42.7017 28.6527H37.3047ZM49.7166 56V28.1818Х55.1317V56H49.7166ZM52.4513 23.8896C51.5095 23.8896 50.7006 23.5756 50.0244 22.9478C49.3604 22.3079 49.0283 21.5472 49.0283 20.6658C49.0283 19.7724 49.3604 19.0117 50.0244 18.3839C50.7006 17.744 51.5095 17.424 52.4513 17.424C53.3931 17.424 54.196 17.744 54.86 18.3839C55.5362 19.0117 55.8742 19.7724 55.8742 20.6658C55.8742 21.5472 55.5362 22.3079 54.86 22.9478C54.196 23.5756 53.3931 23.8896 52.4513 23.8896Z" fill="white"></path>
              </svg>
            </div>
            <div>
              <div class="logo-text-main">Spread Insight</div>
              <div class="logo-text-sub">Криптоскринер</div>
            </div>
          </div>
          <nav class="nav-links">
            <a href="#features">Бета-версия</a>
            <a href="#stats">Статистика отклонений</a>
            <a href="#experience">Сделки</a>
            <a href="#together">Партнерство</a>
          </nav>
          <div class="nav-cta">
            <button
              class="btn btn-primary"
              onclick="ym(105484818,'reachGoal','header-button-click'); window.open('https://spread-i.online/cryptoscreener','_blank')"
            >
              Попробовать бесплатно
            </button>
          </div>
          
          
        </div>
      </div>
    </header>

    <main>
      <!-- Hero -->
      <section class="hero">
        <div class="container">
          <div class="hero-grid">
            <div>
              <div class="hero-pre">Криптоскринер</div>
              <h1 class="hero-title">
                Давайте вместе создадим <span class="accent">лучший арбитражный криптоскринер</span>
              </h1>
              <p class="hero-subtitle">
                Spread Insight от ФИНАМ — это профессиональный инструмент для поиска арбитражных возможностей на крипторынке.<br />
                Сейчас доступна бесплатная бета-версия.<br />
                Мы развиваем платформу совместно с трейдерами, чтобы сделать самый удобный и эффективный инструмент для заработка на межбиржевом арбитраже.
              </p>
              <div class="hero-actions">
                <button class="btn btn-primary" onclick="ym(105484818,'reachGoal','hero-button-click'); 												window.open('https://spread-i.online/cryptoscreener','_blank')">
                  Лучше один раз увидеть
                </button>
              </div>
            </div>

            <!-- Bubbles only -->
            <div class="hero-visual">
              <div class="bubble-stage">
                <svg id="bubbleChart"></svg>
              </div>
            </div>
          </div>
        </div>
      </section>

     

      <!-- Блок: Что уже реализовано в бета-версии -->
      <section id="features">
        <div class="container">
          <div class="section-label">Что уже реализовано в бета-версии</div>
          <h2 class="section-title">Что уже есть в криптоскринере</h2>
          <p class="section-subtitle">
            Бета-версия уже закрывает базовые задачи по межбиржевому арбитражу: от поиска расхождений до оценки результата с учётом фандинга и комиссий.
          </p>
		  <div style="
		    display:flex;
		    gap:40px;
		    margin:26px 0 32px;
		    flex-wrap:wrap;
		  ">
		    <div style="text-align:center;">
		      <div style="font-size:32px; font-weight:700; letter-spacing:-0.5px; color:#fff;">
		        8
		      </div>
		      <div style="font-size:13px; color:#9ca3af; text-transform:uppercase; letter-spacing:0.12em; margin-top:4px;">
		        Бирж
		      </div>
		    </div>

		    <div style="text-align:center;">
		      <div style="font-size:32px; font-weight:700; letter-spacing:-0.5px; color:#fff;">
		        15&nbsp;000+
		      </div>
		      <div style="font-size:13px; color:#9ca3af; text-transform:uppercase; letter-spacing:0.12em; margin-top:4px;">
		        Связок
		      </div>
		    </div>
		  </div>

          <div class="grid-2">
            <!-- Слева: таблица бирж и инструментов -->
            <div class="card card-soft">
              <div class="card-title" style="margin-bottom:8px;">Поддерживаемые биржи и инструменты</div>
              <table class="exch-table">
                <thead>
                  <tr>
                    <th>Биржа</th>
                    <th style="text-align:right;">Спот</th>
                    <th style="text-align:right;">Фьючерс</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="bybit_icon.png" alt="ByBit" class="exch-icon" />
                        <span>ByBit</span>
                      </div>
                    </td>
                    <td class="exch-count">627</td>
                    <td class="exch-count">687</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="bitget_icon.png" alt="BitGet" class="exch-icon" />
                        <span>BitGet</span>
                      </div>
                    </td>
                    <td class="exch-count">736</td>
                    <td class="exch-count">635</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="binance_icon.png" alt="Binance" class="exch-icon" />
                        <span>Binance</span>
                      </div>
                    </td>
                    <td class="exch-count">693</td>
                    <td class="exch-count">561</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="hyperliquid_icon.png" alt="HyperLiquid" class="exch-icon" />
                        <span>HyperLiquid</span>
                      </div>
                    </td>
                    <td class="exch-count">217</td>
                    <td class="exch-count">217</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="kraken_icon.png" alt="Kraken" class="exch-icon" />
                        <span>Kraken</span>
                      </div>
                    </td>
                    <td class="exch-count">81</td>
                    <td class="exch-count">—</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="finam_icon.png" alt="FINAM" class="exch-icon" />
                        <span>FINAM</span>
                      </div>
                    </td>
                    <td class="exch-count">—</td>
                    <td class="exch-count">7</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="gate_icon.png" alt="Gate" class="exch-icon" />
                        <span>Gate</span>
                      </div>
                    </td>
                    <td class="exch-count">2&nbsp;479</td>
                    <td class="exch-count">586</td>
                  </tr>
                  <tr>
                    <td>
                      <div class="exch-exchange-cell">
                        <img src="mexc_icon.png" alt="MEXC" class="exch-icon" />
                        <span>MEXC</span>
                      </div>
                    </td>
                    <td class="exch-count">—</td>
                    <td class="exch-count">815</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Справа: список возможностей -->
		   <div class="card card-soft">
		     <div class="card-title" style="margin-bottom:14px;">Функции</div>

		     <div style="display:grid; grid-template-columns:1fr; gap:14px;">

		       <div style="display:flex; gap:12px; align-items:flex-start;" class="func-item">
				<svg class="icon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g>	<g>		<path d="M114.06,233.186c-43.326,0-78.575,35.248-78.575,78.575c0,43.327,35.249,78.575,78.575,78.575			s78.575-35.248,78.575-78.575C192.635,268.434,157.386,233.186,114.06,233.186z M114.06,375.128			c-34.941,0-63.367-28.427-63.367-63.367c0-34.94,28.426-63.367,63.367-63.367s63.367,28.427,63.367,63.367			C177.427,346.701,149.001,375.128,114.06,375.128z"/>	</g></g><g>	<g>		<path d="M255.998,288.949c-12.578,0-22.812,10.233-22.812,22.812s10.234,22.812,22.812,22.812s22.812-10.233,22.812-22.812			S268.576,288.949,255.998,288.949z M255.998,319.365c-4.193,0-7.604-3.411-7.604-7.604s3.411-7.604,7.604-7.604			s7.604,3.411,7.604,7.604S260.191,319.365,255.998,319.365z"/>	</g></g><g>	<g>		<path d="M484.736,237.85c-0.145-0.219-0.304-0.434-0.475-0.642l-88.534-107.14c-0.021-0.026-0.042-0.053-0.064-0.078			l-19.52-23.623c-0.056-0.067-0.104-0.138-0.161-0.205c-11.083-12.701-27.099-19.984-43.942-19.984			c-32.028,0-58.099,25.963-58.288,57.947c-0.001,0.03-0.001,0.062-0.002,0.092c-0.001,0.086-0.007,0.171-0.007,0.259			c0,0.077,0.009,0.151,0.012,0.228c0.002,0.078-0.003,0.154,0.002,0.232l1.355,22.349h-38.22l1.355-22.349			c0.005-0.078,0-0.154,0.002-0.232c0.003-0.076,0.012-0.151,0.012-0.228c0-0.086-0.006-0.171-0.007-0.259			c-0.001-0.03-0.001-0.062-0.002-0.092c-0.191-31.984-26.26-57.947-58.288-57.947c-16.843,0-32.859,7.285-43.942,19.984			c-0.071,0.082-0.132,0.169-0.199,0.253l-19.489,23.58c-0.016,0.019-0.03,0.039-0.048,0.057l-11.047,13.367			c-1.298,1.571-1.896,3.538-1.703,5.566c0.192,2.018,1.156,3.843,2.717,5.14c1.369,1.125,3.082,1.744,4.846,1.744			c2.281,0,4.41-1.004,5.859-2.758l10.167-12.303c9.81-5.889,21.038-9.003,32.558-9.003c28.907,0,53.936,19.339,61.263,47.158			l-4.949,81.666c-18.78-37.287-57.417-62.929-101.938-62.929c-14.036,0-27.483,2.555-39.912,7.213l23.435-28.361			c1.298-1.561,1.906-3.538,1.712-5.566c-0.192-2.018-1.165-3.843-2.726-5.14c-1.359-1.125-3.082-1.744-4.837-1.744			c-2.281,0-4.419,1.014-5.87,2.768l-58.125,70.342c-0.17,0.205-0.326,0.418-0.472,0.636C10.274,257.771,0,283.587,0,311.762			c0,62.893,51.167,114.06,114.06,114.06c39.464,0,74.307-20.148,94.793-50.695h94.294c20.486,30.547,55.329,50.695,94.793,50.695			c62.893,0,114.06-51.167,114.06-114.06C512,283.587,501.726,257.772,484.736,237.85z M114.06,410.614			c-54.508,0-98.852-44.345-98.852-98.852c0-54.508,44.345-98.852,98.852-98.852s98.852,44.345,98.852,98.852			C212.913,366.269,168.568,410.614,114.06,410.614z M332.039,101.386c12.384,0,24.161,5.333,32.35,14.632l1.444,1.747			c-4.44-0.772-8.96-1.167-13.516-1.167c-25.556,0-48.661,12.2-63.121,31.702l-0.241-3.988			C289.043,120.628,308.334,101.386,332.039,101.386z M235.969,182.492h40.064l1.535,25.349h-43.135L235.969,182.492z			 M233.51,223.049h44.978l1.536,25.341h-48.05L233.51,223.049z M159.683,116.598c-4.555,0-9.074,0.395-13.512,1.166l1.446-1.75			c0.005-0.006,0.008-0.012,0.013-0.018c8.187-9.286,19.957-14.611,32.331-14.611c23.705,0,42.996,19.242,43.085,42.926			l-0.241,3.988C208.344,128.798,185.239,116.598,159.683,116.598z M217.44,359.92c6.808-14.556,10.633-30.773,10.677-47.865			l2.936-48.457h49.893l2.937,48.457c0.044,17.092,3.869,33.309,10.677,47.865H217.44z M291.054,178.964			c7.327-27.819,32.356-47.158,61.263-47.158c11.521,0,22.749,3.116,32.559,9.004l52.969,64.101			c-12.427-4.657-25.872-7.21-39.905-7.21c-44.52,0-83.156,25.642-101.937,62.929L291.054,178.964z M397.94,410.614			c-54.508,0-98.852-44.345-98.852-98.852c0-54.508,44.345-98.852,98.852-98.852s98.852,44.345,98.852,98.852			C496.792,366.269,452.447,410.614,397.94,410.614z"/>	</g></g><g>	<g>		<path d="M397.94,233.186c-43.326,0-78.575,35.248-78.575,78.575c0,43.327,35.249,78.575,78.575,78.575			s78.575-35.248,78.575-78.575C476.515,268.434,441.265,233.186,397.94,233.186z M397.94,375.128			c-34.941,0-63.367-28.427-63.367-63.367c0-34.94,28.426-63.367,63.367-63.367s63.367,28.427,63.367,63.367			C461.307,346.701,432.881,375.128,397.94,375.128z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
		         <div style="font-size:15px; line-height:1.45;">
		           Онлайн-отслеживание расхождений по 15 000+ пар на 8 биржах
		         </div>
		       </div>

		       <div style="display:flex; gap:12px; align-items:flex-start;"  class="func-item">
		         <svg class="icon" id="Layer_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m26.033 207.825c-24.188-30.93-31.373-56.97-20.777-75.302l12.21-21.152c7.108-12.315 14.219-24.636 21.343-36.958 11.342-19.645 41.568-26.071 85.105-18.09 41.174 7.547 90.325 26.99 138.4 54.747 23.03 13.301 44.502 27.726 63.821 42.875l-8.624 10.998c-18.803-14.745-39.726-28.798-62.186-41.771-46.725-26.977-94.29-45.837-133.931-53.103-36.744-6.736-62.435-2.604-70.484 11.336-15.406 26.697 34.221 94.476 132.656 152.826l-7.127 12.022c-46.537-27.586-86.418-59.869-112.299-90.902-14.69-17.615-24.091-34.032-27.958-48.442-2.203 3.816-4.41 7.634-6.611 11.449l-12.213 21.156c-6.037 10.446-2.152 27.158 10.594 46.966l10.571-18.333 12.107 6.981-13.76 23.864c.058.075.114.149.173.224 9.445 12.077 21.4 24.565 35.31 36.993l11.974-20.761 12.106 6.982-13.304 23.067c14.931 12.433 31.698 24.686 49.756 36.279l-7.551 11.76c-41.795-26.832-77.06-57.272-99.301-85.711zm108.211-102.208c29.826 8.879 66.769 25.613 104.021 47.117 15.493 8.955 30.324 18.316 44.083 27.821l7.943-11.499c-14.065-9.717-29.216-19.279-45.036-28.423-38.173-22.037-76.182-39.23-107.024-48.411-34.726-10.338-55.975-9.276-63.153 3.153-7.184 12.42 2.521 31.347 28.844 56.254 23.376 22.119 57.272 46.444 95.458 68.502 2.479 1.424 4.985 2.848 7.463 4.245l6.859-12.176c-2.444-1.377-4.917-2.782-7.347-4.178-37.255-21.521-70.223-45.154-92.829-66.544-25.034-23.688-28.184-35.938-26.349-39.11 1.836-3.175 14.034-6.584 47.067 3.249zm345.725 202.813c-27.124 31.897-68.534 64.748-116.6 92.5-48.09 27.758-97.25 47.2-138.425 54.747-12.198 2.236-23.356 3.342-33.342 3.342-25.658 0-43.603-7.291-51.769-21.436-7.826-13.572-15.664-27.141-23.497-40.7l-10.055-17.409c-11.345-19.651-1.801-49.045 26.876-82.768 27.127-31.9 68.546-64.752 116.627-92.504 48.065-27.751 97.222-47.19 138.414-54.736 43.546-7.974 73.774-1.555 85.12 18.081l33.527 58.143c11.342 19.632 1.799 49.018-26.876 82.74zm-361.585 64.057.001.001c8.048 13.938 33.74 18.068 70.487 11.334 39.643-7.266 87.217-26.126 133.958-53.104 46.722-26.976 86.838-58.745 112.956-89.454 24.206-28.461 33.475-52.78 25.432-66.721l-.005-.008c-8.046-13.926-33.742-18.053-70.497-11.321-39.659 7.265-87.229 26.12-133.945 53.093-46.731 26.974-86.85 58.742-112.967 89.455-24.205 28.46-33.47 52.781-25.42 66.725zm376.356-139.811-18.802-32.607c-4.008 14.895-13.928 31.93-29.507 50.248-27.128 31.896-68.542 64.748-116.614 92.503-48.09 27.758-97.25 47.2-138.425 54.747-12.198 2.236-23.356 3.341-33.342 3.342-9.374 0-17.712-.977-24.926-2.902 6.273 10.861 12.549 21.724 18.815 32.591 6.11 10.582 22.404 15.504 45.978 14.314l-10.586-18.368 12.109-6.978 13.749 23.857c2.996-.419 6.072-.913 9.236-1.493 12.845-2.355 26.527-5.933 40.74-10.604l-12.007-20.788 12.102-6.99 13.339 23.095c14.858-5.47 30.176-12.05 45.64-19.618l-12.297-21.33 12.108-6.98 12.682 21.999c7.215-3.761 14.442-7.727 21.65-11.887 7.198-4.156 14.237-8.426 21.094-12.788l-12.704-21.997 12.102-6.989 12.315 21.323c14.282-9.604 27.636-19.578 39.8-29.709l-13.324-23.103 12.106-6.982 11.991 20.792c11.154-9.977 21.097-20.042 29.561-29.996 2.082-2.449 4.046-4.864 5.905-7.247l-13.759-23.838 12.104-6.986 10.584 18.336c12.813-19.823 16.694-36.39 10.583-46.967zm-352.19 125.835c-7.168-12.425 2.541-31.353 28.855-56.26 23.386-22.136 57.279-46.458 95.437-68.485 38.173-22.037 76.182-39.229 107.024-48.411 34.727-10.338 55.975-9.276 63.155 3.157 7.181 12.433-2.525 31.366-28.846 56.272-23.376 22.119-57.273 46.437-95.446 68.474s-76.182 39.23-107.024 48.411c-15.755 4.69-28.735 7.034-38.887 7.034-12.225-.001-20.346-3.399-24.268-10.192zm12.104-6.986c1.832 3.173 14.03 6.582 47.063-3.251 29.826-8.879 66.769-25.613 104.024-47.12 37.255-21.506 70.221-45.131 92.827-66.521 25.036-23.69 28.183-35.955 26.349-39.131-1.835-3.176-14.033-6.584-47.065 3.248-29.826 8.879-66.77 25.613-104.024 47.12-37.238 21.498-70.201 45.125-92.817 66.532-25.032 23.694-28.187 35.952-26.357 39.123zm-100.148-53.599h-13.975v17.71h-17.71v13.975h17.71v17.71h13.975v-17.71h17.71v-13.975h-17.71zm298.098-161.793h13.975v-17.71h17.682v-13.975h-17.681v-17.71h-13.975v17.71h-17.71v13.975h17.71v17.71z"/></svg>
		         <div style="font-size:15px; line-height:1.45;">
		           Поддержка связок фьючерс–фьючерс и спот–фьючерс
		         </div>
		       </div>

		       <div style="display:flex; gap:12px; align-items:flex-start;" class="func-item">
		         <svg class="icon" id="_x31__px" enable-background="new 0 0 24 24" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><g id="XMLID_1_"><path d="m23.5 11.5c.28 0 .5.22.5.5s-.22.5-.5.5h-.5v-1z"/><path d="m12.5 11.5h10.5v1h-10.5z"/><path d="m21.5 24h-9.5c.28 0 .5-.22.5-.5v-.5h9c.83 0 1.5-.67 1.5-1.5v-9h.5c.28 0 .5-.22.5-.5v9.5c0 1.38-1.12 2.5-2.5 2.5z"/><path d="m24 2.5v9.5c0-.28-.22-.5-.5-.5h-.5v-9c0-.83-.67-1.5-1.5-1.5h-9v-.5c0-.28-.22-.5-.5-.5h9.5c1.38 0 2.5 1.12 2.5 2.5z"/><path d="m20 6c.28 0 .5.22.5.5s-.22.5-.5.5h-4c-.28 0-.5-.22-.5-.5s.22-.5.5-.5z"/><path d="m20 16c.28 0 .5.22.5.5s-.22.5-.5.5h-4c-.28 0-.5-.22-.5-.5s.22-.5.5-.5z"/><path d="m20 19c.28 0 .5.22.5.5s-.22.5-.5.5h-4c-.28 0-.5-.22-.5-.5s.22-.5.5-.5z"/><path d="m12.5 23v.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-.5z"/><path d="m11.5 12.5h1v10.5h-1z"/><path d="m11.5 11.5h1v1h-1z"/><path d="m11.5 1h1v10.5h-1z"/><path d="m12.5.5v.5h-1v-.5c0-.28.22-.5.5-.5s.5.22.5.5z"/><path d="m1 11.5h10.5v1h-10.5z"/><path d="m8 6c.28 0 .5.22.5.5s-.22.5-.5.5h-1.5v-1z"/><path d="m7.85 19.15c.2.19.2.51 0 .7-.09.1-.22.15-.35.15s-.26-.05-.35-.15l-1.15-1.15.7-.7z"/><path d="m7.15 16.15c.19-.2.51-.2.7 0 .2.19.2.51 0 .7l-1.15 1.15-.7-.7z"/><path d="m5.505 17.505h.99v.99h-.99z" transform="matrix(.707 -.707 .707 .707 -10.971 9.515)"/><path d="m6.5 7v1.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-1.5z"/><path d="m5.5 6h1v1h-1z"/><path d="m6.5 4.5v1.5h-1v-1.5c0-.28.22-.5.5-.5s.5.22.5.5z"/><path d="m6 17.3-.7.7-1.15-1.15c-.2-.19-.2-.51 0-.7.19-.2.51-.2.7 0z"/><path d="m5.5 6v1h-1.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5z"/><path d="m4.85 19.85c-.09.1-.22.15-.35.15s-.26-.05-.35-.15c-.2-.19-.2-.51 0-.7l1.15-1.15.7.7z"/><path d="m1 11.5v1h-.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5z"/><path d="m0 2.5c0-1.38 1.12-2.5 2.5-2.5h9.5c-.28 0-.5.22-.5.5v.5h-9c-.83 0-1.5.67-1.5 1.5v9h-.5c-.28 0-.5.22-.5.5z"/><path d="m1 21.5c0 .83.67 1.5 1.5 1.5h9v.5c0 .28.22.5.5.5h-9.5c-1.38 0-2.5-1.12-2.5-2.5v-9.5c0 .28.22.5.5.5h.5z"/></g></svg>
		         <div style="font-size:15px; line-height:1.45;">
		           Расчёт результата с учётом плеча, комиссий, спреда и фандинга
		         </div>
		       </div>

		       <div style="display:flex; gap:12px; align-items:flex-start;" class="func-item">
		        <svg class="icon" id="svg8" height="512" viewBox="0 0 8.4666665 8.4666669" width="512" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="layer1" transform="translate(0 -288.533)"><path id="path1002" d="m.78562533 289.06067a.26460982.26460982 0 0 0 -.2599325.26768v6.87865a.26460982.26460982 0 0 0 .2635498.26562h6.88123387a.26465001.26465001 0 1 0 0-.52917h-6.6151003v-6.6151a.26460982.26460982 0 0 0 -.26975087-.26768zm6.87865017 1.72031a.26460982.26460982 0 0 0 -.181385.0801l-2.7150794 2.71508-1.1363648-1.25006a.26460982.26460982 0 0 0 -.3731038-.0176l-1.5880167 1.45521a.26481563.26481563 0 1 0 .3576009.39068l1.3926797-1.27538 1.1425661 1.25781a.26460982.26460982 0 0 0 .3824055.01l2.9104165-2.91196a.26460982.26460982 0 0 0 -.191719-.4532z" font-variant-ligatures="normal" font-variant-position="normal" font-variant-caps="normal" font-variant-numeric="normal" font-variant-alternates="normal" font-feature-settings="normal" text-indent="0" text-align="start" text-decoration-line="none" text-decoration-style="solid" text-decoration-color="rgb(0,0,0)" text-transform="none" text-orientation="mixed" white-space="normal" shape-padding="0" isolation="auto" mix-blend-mode="normal" solid-color="rgb(0,0,0)" solid-opacity="1" vector-effect="none"/></g></svg>
		         <div style="font-size:15px; line-height:1.45;">
		           Просмотр истории спреда и определение уровней ликвидации
		         </div>
		       </div>

		       <div style="display:flex; gap:12px; align-items:flex-start;" class="func-item">
		         <svg class="icon" id="Layer_2" enable-background="new 0 0 100 100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="m36.453125 63.7285156h-15.8115234c-9.7275391 0-17.6416016-7.9140625-17.6416016-17.6420898 0-9.7275391 7.9140625-17.6416016 17.6416016-17.6416016h15.8115234c1.1044922 0 2 .8955078 2 2v31.2836914c0 1.1044922-.8955078 2-2 2zm-15.8115234-31.2836914c-7.522461 0-13.6416016 6.1196289-13.6416016 13.6416016s6.1191406 13.6420898 13.6416016 13.6420898h13.8115234v-27.2836914z"/><path d="m72.0039062 80.3222656c-.8027344 0-1.5439453-.484375-1.8535156-1.2519531-3.758789-9.3203125-12.680664-15.3417969-22.7314453-15.3417969h-10.9658203c-1.1044922 0-2-.8955078-2-2v-31.2836914c0-1.1044922.8955078-2 2-2h10.9658203c10.0507812 0 18.9726562-6.0219727 22.7314453-15.3417969.3583984-.887207 1.2958984-1.3984375 2.2353516-1.215332.9404297.1826172 1.6191406 1.0058594 1.6191406 1.9633789v64.4711914c0 .9580078-.6787109 1.78125-1.6191406 1.9638672-.1279297.0244141-.2558594.0361328-.381836.0361328zm-33.5507812-20.59375h8.9658203c9.0341797 0 17.2851562 4.1835938 22.5859375 11.0878906v-49.4594726c-5.3007812 6.9047852-13.5507812 11.0878906-22.5859375 11.0878906h-8.9658203z"/><path d="m26.3125 88.1494141c-4.5322266 0-8.2197266-3.6875-8.2197266-8.2197266v-18.2011719c0-1.1044922.8955078-2 2-2h12.4394531c1.1044922 0 2 .8955078 2 2v18.2011719c.0000001 4.5322266-3.6874999 8.2197266-8.2197265 8.2197266zm-4.2197266-24.4208985v16.2011719c0 2.3271484 1.8925781 4.2197266 4.2197266 4.2197266s4.2197266-1.8925781 4.2197266-4.2197266v-16.2011719z"/><path d="m95 48.0864258h-6.8671875c-1.1044922 0-2-.8955078-2-2s.8955078-2 2-2h6.8671875c1.1044922 0 2 .8955078 2 2s-.8955078 2-2 2z"/><path d="m82.7939453 36.5585938c-.4980469 0-.9960938-.1845703-1.3837891-.5556641-.7978516-.7641602-.8242188-2.0302734-.0605469-2.8276367l4.7509766-4.9594727c.7646484-.7983398 2.03125-.8242188 2.828125-.0610352.7978516.7641602.8242188 2.0302734.0605469 2.8276367l-4.7509766 4.9594727c-.3925781.4101563-.9179687.6166993-1.4443359.6166993z"/><path d="m87.5449219 64.5742188c-.5263672 0-1.0517578-.2060547-1.4443359-.6162109l-4.7509766-4.9599609c-.7636719-.7978516-.7363281-2.0644531.0605469-2.828125.7978516-.7626953 2.0654297-.7373047 2.828125.0605469l4.7509766 4.9599609c.7636719.7978516.7363281 2.0644531-.0605469 2.828125-.3876954.3710936-.8857422.555664-1.3837891.555664z"/></svg>
		         <div style="font-size:15px; line-height:1.45;">
		           Уведомления в Telegram о расхождениях и ценовых сигналах
		         </div>
		       </div>

		     </div>
		   </div>
           
        </div>
      </section>

      <!-- Статистика -->
      <section id="stats">
        <div class="container">
          <div class="section-label">Статистика</div>
          <h2 class="section-title">
            Статистика отклонений по биржам за неделю 17–22 ноября 25 года
          </h2>
          <p class="section-subtitle">
            Кружки показывают количество тикеров с расхождением выше порога и длительностью не меньше заданной.
          </p>

          <div class="controls">
            <div class="control">
              <div class="control-label">
                <span>Размер отклонений, %</span>
                <span class="value" id="diffValue">2.0&nbsp;%</span>
              </div>
              <input id="diffSlider" type="range" min="2" max="10" step="0.5" value="2" />
            </div>
            <div class="control">
              <div class="control-label">
                <span>Время отклонения, минут</span>
                <span class="value" id="timeValue">20&nbsp;мин</span>
              </div>
              <input id="timeSlider" type="range" min="0" max="60" step="5" value="20" />
            </div>
          </div>

          <div class="matrix-wrapper">
            <table class="matrix" id="matrixTable"></table>
          </div>
        </div>
      </section>

      <!-- Опыт использования -->
      <section id="experience">
        <div class="container">
          <div class="section-label">Опыт использования</div>
          <h2 class="section-title">Сделки между Binance и Bybit 21–22 ноября 2025 года</h2>
         

          <div class="experience-slider">
            <div class="tabs" id="tabsContainer"></div>

            <div class="slider-container">
              <div class="slides-wrapper" id="slidesWrapper"></div>

              <div class="slider-controls">
                <button class="slider-button prev" id="prevBtn">&#8249;</button>
                <button class="slider-button next" id="nextBtn">&#8250;</button>
                <div class="slide-index" id="slideIndex"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

     <!-- Block 2: Давайте зарабатывать вместе -->
     <section id="together">
       <div class="container">
         <div class="section-label">Партнёрство</div>
         <h2 class="section-title">Давайте зарабатывать вместе</h2>
         <p class="section-subtitle">
           Spread Insight развивается вместе с теми, кто реально зарабатывает на рынке.  
           Делитесь опытом, приводите аудиторию, интегрируйте скринер в свои решения.
         </p>

         <div class="grid-3">
           <div class="card card-soft">
             <div class="card-title">Предложите фичу</div>
             <p class="card-text">
               Поделитесь идеей или нужным функционалом — и получите год бесплатного доступа
               после релиза платной версии.
             </p>
           </div>
           <div class="card card-soft">
             <div class="card-title">Зарабатывайте с нами</div>
             <p class="card-text">
               Рекомендуйте скринер своей аудитории и получайте долю от платежей через персональный промокод.
               Мы поможем подготовить материалы и расскажем о продукте.
             </p>
           </div>
           <div class="card card-soft">
             <div class="card-title">Интегрируйте в свои решения</div>
             <p class="card-text">
               Мы открыты к API-интеграциям и подключению в ваши инструменты — публичные продукты,
               внутренние терминалы и аналитические системы.
             </p>
           </div>
         </div>
       
         
       </div>
     </section>
	 
	 <!-- CTA блок после партнёрства -->
	      <section id="cta" class="cta">
	        <div class="container">
	          <div class="cta-inner" style="justify-content:center; text-align:center;">
	            <div>
	              <div class="cta-text-main">Обсудим, как скринер может помочь вам зарабатывать больше?</div>
	            
	            </div>
	            <div class="cta-actions">
	              <button class="btn btn-primary" onclick="ym(105484818,'reachGoal','link-us-click');jivo_api.open();">
	                Связаться с нами
	              </button>
	            </div>
	          </div>
	        </div>
	      </section>
	 

    <footer>
      <div class="container">
        <div class="footer-inner">
          <div>© <span id="year"></span> Spread Insight · Криптоскринер для межбиржевого арбитража</div>
		  <div class="footer-links">
		             <a href="https://spread-i.online/help" target="_blank" rel="noopener">Документация</a>
		             <a href="https://spread-i.online/userdataprocessing" target="_blank" rel="noopener">Правила обработки ПД</a>
		           </div>
        </div>
      </div>
    </footer>
  </div>

  <!-- библиотеки и данные -->
  <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
  <script src="arb_deals.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Данные для матрицы (ожидается window.screenerData в screener_data.js) -->
  <script src="./screener_data.js"></script>

  <script>
    // Текущий год в футере
    document.getElementById('year').textContent = new Date().getFullYear();

    // ==== HERO BUBBLES ====
    const svgHero = d3.select("#bubbleChart");
    const bubbleContainer = document.querySelector(".bubble-stage");
    const widthHero = bubbleContainer.clientWidth;
    const heightHero = bubbleContainer.clientHeight;

    svgHero.attr("width", widthHero).attr("height", heightHero);

    const SIZE_K = 0.40;
    const DRIFT_MAX = 0.16;
    const DRIFT_CHANGE_MS = 7000;
	
    const DATA_URL = "https://script.google.com/macros/s/AKfycbzVXCW9daPqP4Cmnq9WdCGMUyJ1Oy7KX9O5raf6YcJJ9LyVi-ofDBr8f6VItXhI51Vx6A/exec";
    const FETCH_INTERVAL_MS = 6000_000; // 1 минута
	

    const fallbackRawData = [
      {
        id: "be5a7773-d763-4dae-aba2-6d611b7133e9",
        ticker: "USTCUSDT",
        exchange1: "Gate",
        exchange2: "Mexc",
        diff: 0.025
      },
      {
        id: "9ef9d78a-1630-4b2c-ba1e-027fb53911bc",
        ticker: "AIXBTUSDT",
        exchange1: "BitGet",
        exchange2: "Mexc",
        diff: 0.024
      },
      {
        id: "7105cdf7-d7e1-420b-8fba-ea5a756d1454",
        ticker: "RESOLVUSDT",
        exchange1: "Binance",
        exchange2: "ByBit",
        diff: 0.024
      },
      {
        id: "be5a7773-d763-4dae-aba2-6d611b7133e9",
        ticker: "USTCUSDT",
        exchange1: "Gate",
        exchange2: "Mexc",
        diff: 0.025
      },
      {
        id: "dec0bbf4-f5b1-4d42-92ad-824ef20908b5",
        ticker: "CORLUSDT",
        exchange1: "Gate",
        exchange2: "Mexc",
        diff: 0.022
      },
      {
        id: "a0f83214-c561-4694-a893-ea0bb81baf26",
        ticker: "ALLUSDT",
        exchange1: "Gate",
        exchange2: "Binance",
        diff: 0.068
      },
      {
        id: "3145e69a-bf8b-4d5e-94d9-e0b85858b30b",
        ticker: "GIGGLEUSDT",
        exchange1: "Binance",
        exchange2: "BitGet",
        diff: 0.042
      },
      {
        id: "d546e957-78b5-46d7-bb21-8d6e0b376de7",
        ticker: "KITEUSDT",
        exchange1: "Binance",
        exchange2: "Mexc",
        diff: 0.035
      },
      {
        id: "e4d628da-8e36-4f54-9377-87df0a363db9",
        ticker: "FUSDT",
        exchange1: "Binance",
        exchange2: "Mexc",
        diff: 0.026
      }
    ];
	
	let rawData = fallbackRawData.slice();

    const defsHero = svgHero.append("defs");
    const gradsGroupHero = defsHero.append("g").attr("id", "bubbleGradients");

    defsHero.append("clipPath")
      .attr("id", "icon-clip")
      .attr("clipPathUnits", "objectBoundingBox")
      .append("circle")
      .attr("cx", 0.5)
      .attr("cy", 0.5)
      .attr("r", 0.5);

    let nodesHero = [];
    let simulationHero = null;

    function normalizeExchange(name) {
      return (name || "").trim().toLowerCase();
    }

    function hashColor(symbol) {
      let hash = 0;
      for (let i = 0; i < symbol.length; i++) {
        hash = (hash * 31 + symbol.charCodeAt(i)) & 0xffffffff;
      }
      const r = (hash & 0xff);
      const g = (hash >> 8) & 0xff;
      const b = (hash >> 16) & 0xff;
      return `#${[r, g, b].map((v) => v.toString(16).padStart(2, "0")).join("")}`;
    }

    function updateGradientsHero(nodes) {
      const grad = gradsGroupHero
        .selectAll("radialGradient")
        .data(nodes, d => d.id)
        .join(
          enter => enter.append("radialGradient")
            .attr("id", d => `grad-${d.id}`)
            .attr("cx", "50%")
            .attr("cy", "50%")
            .attr("r", "50%"),
          update => update
        );

      grad.each(function(d) {
        const g = d3.select(this);
        g.selectAll("stop").remove();

        g.append("stop")
          .attr("offset", "0%")
          .attr("stop-color", d.color)
          .attr("stop-opacity", 0);

        g.append("stop")
          .attr("offset", "40%")
          .attr("stop-color", d.color)
          .attr("stop-opacity", 0);

        g.append("stop")
          .attr("offset", "85%")
          .attr("stop-color", d.color)
          .attr("stop-opacity", 0.15);

        g.append("stop")
          .attr("offset", "100%")
          .attr("stop-color", d.color)
          .attr("stop-opacity", 0.85);
      });
    }

    function createOrUpdateSimulationHero() {
      const nodeSel = svgHero
        .selectAll("g.bubble-node")
        .data(nodesHero, d => d.id);

      const nodeEnter = nodeSel.enter()
        .append("g")
        .attr("class", "bubble-node")
        .style("cursor", "pointer")
        .attr("opacity", 0);

      nodeEnter.append("circle");
      nodeEnter.append("text").attr("class", "diff-text");
      nodeEnter.append("text").attr("class", "symbol-text");
      nodeEnter.append("g").attr("class", "icons-group");

      nodeEnter.transition()
        .duration(600)
        .attr("opacity", 1);

      nodeSel.exit()
        .transition()
        .duration(400)
        .attr("opacity", 0)
        .remove();

      const nodeMerge = nodeEnter.merge(nodeSel);

      nodeMerge.select("circle")
        .attr("r", d => d.r)
        .attr("fill", d => `url(#grad-${d.id})`)
        .attr("stroke", d => d.color)
        .attr("stroke-width", 2);

      nodeMerge.select("text.diff-text")
        .text(d => `${(Math.abs(d.diff) * 100).toFixed(1)}%`)
        .attr("font-size", d => d.r * SIZE_K)
        .attr("dy", d => -0.25 * d.r);

      nodeMerge.select("text.symbol-text")
        .text(d => d.symbol)
        .attr("font-size", d => d.r * SIZE_K * 0.65)
        .attr("dy", d => 0.02 * d.r);

      nodeMerge.select("g.icons-group")
        .attr("transform", d => `translate(0, ${0.32 * d.r})`)
        .each(function(d) {
          const g = d3.select(this);
          g.selectAll("*").remove();

          const iconSize = d.r * SIZE_K * 0.9;
          const spacing = iconSize + 4;
          const mics = d.mics.slice(0, 2);

          mics.forEach((mic, idx) => {
            const x = idx === 0 ? -spacing / 2 : spacing / 2;

            const image = g.append("image")
              .attr("x", x - iconSize / 2)
              .attr("y", -iconSize / 2)
              .attr("width", iconSize)
              .attr("height", iconSize)
              .attr("href", `${mic}_icon.png`)
              .attr("clip-path", "url(#icon-clip)");

            image.on("error", function() {
              d3.select(this).remove();
              const fo = g.append("foreignObject")
                .attr("x", x - iconSize / 2)
                .attr("y", -iconSize / 2)
                .attr("width", iconSize)
                .attr("height", iconSize);

              fo.append("xhtml:div")
                .attr("class", "icon-fallback")
                .style("border-radius", "999px")
                .style("font-size", `${iconSize * 0.45}px`)
                .style("display", "flex")
                .style("align-items", "center")
                .style("justify-content", "center")
                .style("background", "rgba(15,23,42,0.9)")
                .style("border", "1px solid rgba(148,163,184,0.5)")
                .style("color", "#e5e7eb")
                .text((mic || "?").slice(0, 2).toUpperCase());
            });
          });
        });

      const allNodes = nodeMerge;
	  
	  // --- Увеличение пузыря на 5% при наведении ---
	  allNodes
	    .on("mouseenter.enlarge", function (event, d) {
	      d._orig_r = d.r;           // запомним оригинальный размер
	      d.r = d.r * 1.05;          // увеличиваем
	      d3.select(this).select("circle")
	        .transition().duration(120)
	        .attr("r", d.r);
	    })
	    .on("mouseleave.enlarge", function (event, d) {
	      if (d._orig_r) d.r = d._orig_r;
	      d3.select(this).select("circle")
	        .transition().duration(120)
	        .attr("r", d.r);
	    });
	  

      allNodes.on("click", function(event, d) {
        const url = `https://spread-i.online/cryptoscreener/${d.pairId}`;
		ym(105484818,'reachGoal','balloon-click');
        window.open(url, "_blank");
      });

      if (!simulationHero) {
        simulationHero = d3.forceSimulation(nodesHero)
          .alpha(0.6)
          .alphaDecay(0)
          .force("center", d3.forceCenter(widthHero / 2, heightHero / 2))
          .force("collide", d3.forceCollide(d => d.r + 6).strength(0.9).iterations(3))
          .force("x", d3.forceX(widthHero / 2).strength(0.02))
          .force("y", d3.forceY(heightHero / 2).strength(0.02))
          .velocityDecay(0.25)
          .on("tick", tickedHero);
      } else {
        simulationHero.nodes(nodesHero);
        simulationHero.alpha(0.6);
        simulationHero.alphaDecay(0);
        simulationHero.restart();
      }

      function tickedHero() {
        nodesHero.forEach(d => {
          if (Number.isFinite(d.dvx) && Number.isFinite(d.dvy)) {
            d.x += d.dvx;
            d.y += d.dvy;
          }

          const margin = 2;
          const minX = d.r + margin;
          const maxX = widthHero - d.r - margin;
          const minY = d.r + margin;
          const maxY = heightHero - d.r - margin;

          if (d.x < minX) { d.x = minX; d.vx *= -0.5; d.dvx = Math.abs(d.dvx); }
          if (d.x > maxX) { d.x = maxX; d.vx *= -0.5; d.dvx = -Math.abs(d.dvx); }
          if (d.y < minY) { d.y = minY; d.vy *= -0.5; d.dvy = Math.abs(d.dvy); }
          if (d.y > maxY) { d.y = maxY; d.vy *= -0.5; d.dvy = -Math.abs(d.dvy); }
        });

        svgHero.selectAll("g.bubble-node")
          .attr("transform", d => `translate(${d.x},${d.y})`);
      }
    }

    function randomizeDriftHero() {
      nodesHero.forEach(d => {
        const angle = Math.random() * 2 * Math.PI;
        const speed = DRIFT_MAX * (0.4 + 0.6 * Math.random());
        d.dvx = Math.cos(angle) * speed;
        d.dvy = Math.sin(angle) * speed;
      });
      if (simulationHero) {
        simulationHero.alpha(0.4).restart();
      }
    }

    function initHeroBubbles() {
      const pairs = rawData;
      const maxAbsDiff = d3.max(pairs, d => Math.abs(d.diff)) || 1;

      const rScale = d3.scaleLinear()
        .domain([0, maxAbsDiff])
        .range([24, 52]);

      nodesHero = pairs.map((p, idx) => ({
        id: `node-${idx}`,
        pairId: p.id,
        symbol: p.ticker,
        mics: [
          normalizeExchange(p.exchange1),
          normalizeExchange(p.exchange2)
        ],
        diff: p.diff,
        color: hashColor(p.ticker),
        r: rScale(Math.abs(p.diff)),
        x: widthHero / 2 + (Math.random() - 0.5) * 40,
        y: heightHero / 2 + (Math.random() - 0.5) * 40,
        dvx: 0,
        dvy: 0
      }));

      randomizeDriftHero();
      updateGradientsHero(nodesHero);
      createOrUpdateSimulationHero();
    }
    async function reloadHeroBubblesFromRemote(useFallbackOnError = true) {
      try {
        const resp = await fetch(DATA_URL, { cache: "no-store" });
        if (!resp.ok) {
          throw new Error(`HTTP ${resp.status}`);
        }

        const json = await resp.json();

        // ожидаем массив объектов с полями id, ticker, exchange1, exchange2, diff
        const parsed = (Array.isArray(json) ? json : []).map((row, idx) => {
          const diffVal = typeof row.diff === "string" ? parseFloat(row.diff) : row.diff;

          return {
            id: row.id ?? `remote-${idx}`,
            ticker: row.ticker ?? row.symbol ?? "",
            exchange1: row.exchange1 ?? row.ex1 ?? row.exchange_1 ?? "",
            exchange2: row.exchange2 ?? row.ex2 ?? row.exchange_2 ?? "",
            diff: Number.isFinite(diffVal) ? diffVal : 0
          };
        }).filter(d => d.ticker && Number.isFinite(d.diff));

        if (!parsed.length) {
          throw new Error("empty or invalid data");
        }

        rawData = parsed;
        initHeroBubbles();
      } catch (err) {
        console.error("Failed to reload hero bubbles from remote:", err);
        if (useFallbackOnError) {
          rawData = fallbackRawData.slice();
          initHeroBubbles();
        }
      }
    }
	

	reloadHeroBubblesFromRemote(true);

	    // раз в минуту обновляем данные пузырей
	    setInterval(() => {
	      reloadHeroBubblesFromRemote(false);
	    }, FETCH_INTERVAL_MS);

	    // постоянное медленное дрейфовое движение
	    setInterval(randomizeDriftHero, DRIFT_CHANGE_MS);

    // ==== MATRIX STATS ====
    const screenerData = window.screenerData || [];

    const MIN_BUBBLE_SIZE = 18;
    const MAX_BUBBLE_SIZE = 70;

    const diffSlider = document.getElementById('diffSlider');
    const timeSlider = document.getElementById('timeSlider');
    const diffValueLabel = document.getElementById('diffValue');
    const timeValueLabel = document.getElementById('timeValue');
    const matrixTable = document.getElementById('matrixTable');

    const exchangesSet = new Set();
    for (const row of screenerData) {
      exchangesSet.add(row.first_exchange);
      exchangesSet.add(row.second_exchange);
    }
    const exchanges = Array.from(exchangesSet).sort();

    function exchangeIconSrc(exchange) {
      return `${(exchange || '').toLowerCase()}_icon.png`;
    }

    const cellMap = new Map(); // key "ex1|ex2" -> bubble element

    function buildMatrixSkeleton() {
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');

      const cornerTh = document.createElement('th');
      cornerTh.classList.add('corner');
      headerRow.appendChild(cornerTh);

      for (const ex of exchanges) {
        const th = document.createElement('th');
        const label = document.createElement('div');
        label.className = 'exchange-label';

        const img = document.createElement('img');
        img.className = 'exchange-icon';
        img.src = exchangeIconSrc(ex);
        img.alt = ex;

        const span = document.createElement('span');
        span.textContent = ex;

        label.appendChild(img);
        label.appendChild(span);
        th.appendChild(label);
        headerRow.appendChild(th);
      }

      thead.appendChild(headerRow);
      const tbody = document.createElement('tbody');

      for (const rowEx of exchanges) {
        const tr = document.createElement('tr');

        const rowTh = document.createElement('th');
        rowTh.className = 'row-header';
        const label = document.createElement('div');
        label.className = 'exchange-label';
        const img = document.createElement('img');
        img.className = 'exchange-icon';
        img.src = exchangeIconSrc(rowEx);
        img.alt = rowEx;
        const span = document.createElement('span');
        span.textContent = rowEx;
        label.appendChild(img);
        label.appendChild(span);
        rowTh.appendChild(label);
        tr.appendChild(rowTh);

        for (const colEx of exchanges) {
          const td = document.createElement('td');
          const wrapper = document.createElement('div');
          wrapper.className = 'bubble-wrapper';
          const bubble = document.createElement('div');
          bubble.className = 'bubble empty';

          wrapper.appendChild(bubble);
          td.appendChild(wrapper);
          tr.appendChild(td);

          const [ex1, ex2] = [rowEx, colEx].sort();
          const key = `${ex1}|${ex2}`;
          cellMap.set(key, bubble);
        }

        tbody.appendChild(tr);
      }

      matrixTable.innerHTML = '';
      matrixTable.appendChild(thead);
      matrixTable.appendChild(tbody);
    }

    function computeCounts(diffThresholdPercent, timeThresholdMinutes) {
      const diffThreshold = diffThresholdPercent / 100;

      const counts = new Map();
      let maxCount = 0;

      for (const row of screenerData) {
        const diff = Number(row.diff ?? row.price_difference ?? 0);
        const durationCount = Number(row.count ?? 0);

        if (diff < diffThreshold) continue;
        if (durationCount <= timeThresholdMinutes) continue;

        const [ex1, ex2] = [row.first_exchange, row.second_exchange].sort();
        const key = `${ex1}|${ex2}`;

        const current = counts.get(key) ?? 0;
        const next = current + 1;
        counts.set(key, next);
        if (next > maxCount) maxCount = next;
      }

      return { counts, maxCount };
    }

    function updateMatrix(skip_metrika=false) {
	  if (!skip_metrika) {
		  ym(105484818,'reachGoal','exchange-stat-play')
	  }
      const diffThreshold = Number(diffSlider.value);
      const timeThreshold = Number(timeSlider.value);

      diffValueLabel.innerHTML = `${diffThreshold.toFixed(1)}&nbsp;%`;
      timeValueLabel.innerHTML = `${timeThreshold}&nbsp;мин`;

      const { counts, maxCount } = computeCounts(diffThreshold, timeThreshold);

      for (const [key, bubble] of cellMap.entries()) {
        const count = counts.get(key) ?? 0;

        if (!count || maxCount === 0) {
          bubble.textContent = '';
          bubble.classList.add('empty');
          bubble.style.width = `${MIN_BUBBLE_SIZE}px`;
          bubble.style.height = `${MIN_BUBBLE_SIZE}px`;
          bubble.style.fontSize = `10px`;
          continue;
        }

        bubble.classList.remove('empty');
        bubble.textContent = count;

        const ratio = maxCount > 0 ? count / maxCount : 0;
        const size = MIN_BUBBLE_SIZE + ratio * (MAX_BUBBLE_SIZE - MIN_BUBBLE_SIZE);

        bubble.style.width = `${size}px`;
        bubble.style.height = `${size}px`;

        const minFont = 10;
        const maxFont = 18;
        const fontSize = minFont + ratio * (maxFont - minFont);
        bubble.style.fontSize = `${fontSize}px`;
      }
    }

    if (exchanges.length > 0) {
      buildMatrixSkeleton();
      updateMatrix(true);
      diffSlider.addEventListener('input', updateMatrix);
      timeSlider.addEventListener('input', updateMatrix);
    }

    // ==== EXPERIENCE SLIDER (arbDeals + спред-графики) ====

    function formatDateTimeISO(iso) {
      if (!iso) return "";
      const d = new Date(iso);
      if (Number.isNaN(d.getTime())) return iso;
      const pad = (n) => String(n).padStart(2, "0");
      const yyyy = d.getUTCFullYear();
      const mm = pad(d.getUTCMonth() + 1);
      const dd = pad(d.getUTCDate());
      const hh = pad(d.getUTCHours());
      const mi = pad(d.getUTCMinutes());
      return `${yyyy}-${mm}-${dd} ${hh}:${mi} UTC`;
    }

    // duration_ms на самом деле секунды
    function durationMinutes(durationSecondsStr) {
      const sec = Number(durationSecondsStr);
      if (!Number.isFinite(sec)) return "";
      return sec;
    }

    function parseNumberMaybe(str) {
      if (str == null) return null;
      const cleaned = String(str).replace(/,/g, "").replace("%", "").trim();
      const n = Number(cleaned);
      return Number.isFinite(n) ? n : null;
    }

    function formatMoney(val, decimals = 0) {
      const n = parseNumberMaybe(val);
      if (n == null) return "";
      return n.toFixed(decimals);
    }

    function formatMoneyWithMinus(val, decimals = 2) {
      let n = parseNumberMaybe(val);
      if (n == null) return "";
      if (n > 0) n = -n;
      return n.toFixed(decimals);
    }

    function formatPrice6(val) {
      const n = parseNumberMaybe(val);
      if (n == null) return "";
      return n.toFixed(6);
    }

    function findClosestCandle(candles, targetSec) {
      if (!candles || !candles.length) return null;
      let best = null;
      let bestDiff = Infinity;
      for (const c of candles) {
        const t = typeof c.time === "number" ? c.time : Number(c.time);
        if (!Number.isFinite(t)) continue;
        const diff = Math.abs(t - targetSec);
        if (diff < bestDiff) {
          bestDiff = diff;
          best = c;
        }
      }
      return best;
    }

    function buildMarkers(spreadCandles, deal) {
      if (!spreadCandles || !spreadCandles.length) return [];

      const openIso = deal.open_datetime;
      const closeIso = deal.close_datetime;
      if (!openIso || !closeIso) return [];

      const openSec = Math.floor(new Date(openIso).getTime() / 1000);
      const closeSec = Math.floor(new Date(closeIso).getTime() / 1000);

      const entryCandle = findClosestCandle(spreadCandles, openSec);
      const exitCandle = findClosestCandle(spreadCandles, closeSec);

      const markers = [];
      if (!entryCandle) return markers;

      const closeEntry = parseNumberMaybe(entryCandle.close);
      if (closeEntry == null) return markers;

      const deviation = closeEntry - 1.0;
      const entryArrowDown = deviation > 0;

      const COLOR_ARROW = "#e879f9";

      const entryShape = entryArrowDown ? "arrowDown" : "arrowUp";
      const entryPosition = entryShape === "arrowUp" ? "belowBar" : "aboveBar";

      const entryMarker = {
        time: entryCandle.time,
        position: entryPosition,
        shape: entryShape,
        color: COLOR_ARROW,
        text: "вход",
        size: 2,
      };
      markers.push(entryMarker);

      if (exitCandle) {
        const exitShape = entryArrowDown ? "arrowUp" : "arrowDown";
        const exitPosition = exitShape === "arrowUp" ? "belowBar" : "aboveBar";

        const exitMarker = {
          time: exitCandle.time,
          position: exitPosition,
          shape: exitShape,
          color: COLOR_ARROW,
          text: "выход",
          size: 2,
        };
        markers.push(exitMarker);
      }

      return markers;
    }

    const slidesWrapper = document.getElementById("slidesWrapper");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const slideIndexLabel = document.getElementById("slideIndex");
    const tabsContainer = document.getElementById("tabsContainer");

    const slideItems = [];
    const tabButtons = [];

    (window.arbDeals || []).forEach((deal) => {
      const roiStr = deal.ROI != null ? String(deal.ROI) : "";

      const tabBtn = document.createElement("button");
      tabBtn.className = "tab-btn";
      tabBtn.textContent = `${deal.symbol || ""} ${roiStr}`;
      tabsContainer.appendChild(tabBtn);

      const slide = document.createElement("div");
      slide.className = "slide";

      const left = document.createElement("div");
      left.className = "slide-left";

      const right = document.createElement("div");
      right.className = "slide-right";

      const header = document.createElement("div");
      header.className = "deal-header";

      const symbolEl = document.createElement("h2");
      symbolEl.className = "deal-symbol";
      symbolEl.textContent = deal.symbol || "";

      const roiBlock = document.createElement("div");
      roiBlock.className = "deal-roi-block";
      const roiMain = document.createElement("div");
      roiMain.className = "deal-roi-main";
      roiMain.textContent = roiStr;
      const roiLabel = document.createElement("div");
      roiLabel.className = "deal-roi-label";
      roiLabel.textContent = "без плечей";
      roiBlock.appendChild(roiMain);
      roiBlock.appendChild(roiLabel);

      header.appendChild(symbolEl);
      header.appendChild(roiBlock);
      left.appendChild(header);

      const table = document.createElement("table");
      const thead = document.createElement("thead");
      const trHead = document.createElement("tr");
      ["Параметр", "Bybit", "Binance"].forEach((h) => {
        const th = document.createElement("th");
        th.textContent = h;
        trHead.appendChild(th);
      });
      thead.appendChild(trHead);
      table.appendChild(thead);

      const tbody = document.createElement("tbody");

      function addRow(paramName, bybitVal, binanceVal, rowClass) {
        const tr = document.createElement("tr");
        if (rowClass) tr.className = rowClass;
        const tdName = document.createElement("td");
        tdName.className = "param-name";
        tdName.textContent = paramName;

        const tdBybit = document.createElement("td");
        tdBybit.textContent = bybitVal ?? "";

        const tdBinance = document.createElement("td");
        tdBinance.textContent = binanceVal ?? "";

        tr.appendChild(tdName);
        tr.appendChild(tdBybit);
        tr.appendChild(tdBinance);
        tbody.appendChild(tr);
      }

      function addSharedRow(paramName, value, rowClass) {
        const tr = document.createElement("tr");
        if (rowClass) tr.className = rowClass;
        const tdName = document.createElement("td");
        tdName.className = "param-name";
        tdName.textContent = paramName;

        const tdValue = document.createElement("td");
        tdValue.colSpan = 2;
        tdValue.textContent = value ?? "";

        tr.appendChild(tdName);
        tr.appendChild(tdValue);
        tbody.appendChild(tr);
      }

      const qty = deal.qty ?? "";
      const sideBybit = deal.bybit_side ?? "";
      const sideBinance = deal.binance_side ?? "";
      const openISO = deal.open_datetime ?? "";
      const closeISO = deal.close_datetime ?? "";
      const openStr = formatDateTimeISO(openISO);
      const closeStr = formatDateTimeISO(closeISO);
      const bybitEntryPrice = formatPrice6(deal.bybit_entry_price);
      const binanceEntryPrice = formatPrice6(deal.binance_entry_price);
      const bybitExitPrice = formatPrice6(deal.bybit_exit_price);
      const binanceExitPrice = formatPrice6(deal.binance_exit_price);
      const minutesInDeal = durationMinutes(deal.duration_ms);

      const bybitPricePnl = formatMoney(deal.bybit_price_pnl, 2);
      const binancePricePnl = formatMoney(deal.binance_price_pnl, 2);
      const bybitCommission = formatMoneyWithMinus(deal.bybit_commission, 2);
      const binanceCommission = formatMoneyWithMinus(deal.binance_commission, 2);
      const bybitFunding = formatMoney(deal.bybit_funding, 2);
      const binanceFunding = formatMoney(deal.binance_funding, 2);
      const bybitResult = formatMoney(deal.bybit_result, 2);
      const binanceResult = formatMoney(deal.binance_result, 2);

      const capital = formatMoney(deal.overall_position, 2);
      const overallResult = formatMoney(deal.overall_result, 2);

      addRow("Объем", qty, qty);
      addRow("Направление", sideBybit, sideBinance);
      addSharedRow("Дата и время входа", openStr);
      addRow("Средняя цена входа", bybitEntryPrice, binanceEntryPrice);
      addSharedRow("Дата и время выхода", closeStr);
      addRow("Средняя цена выхода", bybitExitPrice, binanceExitPrice);
      addSharedRow("Время в сделке, минут", minutesInDeal);

      addRow("Прибыль от разницы цен, USDT", bybitPricePnl, binancePricePnl);
      addRow("Комиссии, USDT", bybitCommission, binanceCommission);
      addRow("Фандинг, USDT", bybitFunding, binanceFunding);
      addRow("Результат по бирже, USDT", bybitResult, binanceResult);

      const trCap = document.createElement("tr");
      trCap.className = "overall-row";
      const tdCapName = document.createElement("td");
      tdCapName.className = "param-name";
      tdCapName.textContent = "Размер позиции, USDT";
      const tdCapVal = document.createElement("td");
      tdCapVal.colSpan = 2;
      tdCapVal.className = "emphasis-value";
      tdCapVal.textContent = capital;
      trCap.appendChild(tdCapName);
      trCap.appendChild(tdCapVal);
      tbody.appendChild(trCap);

      const trOverall = document.createElement("tr");
      trOverall.className = "overall-row";
      const tdNameOverall = document.createElement("td");
      tdNameOverall.className = "param-name";
      tdNameOverall.textContent = "Общий результат, USDT";
      const tdOverallValue = document.createElement("td");
      tdOverallValue.colSpan = 2;
      tdOverallValue.className = "emphasis-value";
      tdOverallValue.textContent = overallResult;
      trOverall.appendChild(tdNameOverall);
      trOverall.appendChild(tdOverallValue);
      tbody.appendChild(trOverall);

      table.appendChild(tbody);
      left.appendChild(table);

      const chartContainer = document.createElement("div");
      const chartTitle = document.createElement("div");
      chartTitle.style.fontSize = "14px";
      chartTitle.style.color = "#e5e7eb";
      chartTitle.style.marginBottom = "6px";
      chartTitle.style.textAlign = "center";
      chartTitle.textContent = `Спред   Binance: ${deal.symbol} / Bybit: ${deal.symbol}`;
      right.appendChild(chartTitle);

      chartContainer.className = "chart-container";
      right.appendChild(chartContainer);

      const spreadCandles = (window.arbDealSpreads || {})[deal.id] || [];
      if (!spreadCandles.length) {
        const msg = document.createElement("div");
        msg.className = "no-data";
        msg.textContent = "Нет данных по спреду для этой сделки.";
        chartContainer.appendChild(msg);
      }

      slide.appendChild(left);
      slide.appendChild(right);
      slidesWrapper.appendChild(slide);

      const slideIndexLocal = slideItems.length;
      tabBtn.addEventListener("click", () => {
        currentIndex = slideIndexLocal;
		ym(105484818,'reachGoal','deals-switch');
        updateSlider();
      });

      slideItems.push({
        slide,
        chartContainer,
        deal,
        chartInitialized: false,
        chart: null,
        series: null,
      });
      tabButtons.push(tabBtn);
    });

    let currentIndex = 0;

    function updateTabsActive() {
      tabButtons.forEach((btn, idx) => {
        if (idx === currentIndex) btn.classList.add("active");
        else btn.classList.remove("active");
      });
    }

    function initChartForIndex(index) {
      const item = slideItems[index];
      if (!item || item.chartInitialized) return;

      const spreadCandles = (window.arbDealSpreads || {})[item.deal.id] || [];
      if (!spreadCandles.length) {
        item.chartInitialized = true;
        return;
      }

      const chart = LightweightCharts.createChart(item.chartContainer, {
        layout: {
          background: { type: "solid", color: "#000000" },
          textColor: "#e5e7eb",
        },
        grid: {
          vertLines: { color: "rgba(51, 65, 85, 0.6)" },
          horzLines: { color: "rgba(51, 65, 85, 0.6)" },
        },
        timeScale: {
          borderColor: "rgba(148, 163, 184, 0.5)",
          timeVisible: true,
          secondsVisible: false,
          tickMarkFormatter: (time) => {
            if (typeof time === "string") return time;
            const d = new Date(time * 1000);
            const hh = String(d.getUTCHours()).padStart(2, "0");
            const mm = String(d.getUTCMinutes()).padStart(2, "0");
            return `${hh}:${mm}`;
          },
        },
        rightPriceScale: {
          borderColor: "rgba(148, 163, 184, 0.5)",
        },
        crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
        localization: {
          priceFormatter: (price) => price.toFixed(4),
        },
      });

      const series = chart.addCandlestickSeries({
        upColor: "rgba(37, 99, 235, 0.0)",
        borderUpColor: "rgba(59, 130, 246, 0.95)",
        wickUpColor: "rgba(0, 0, 0, 0)",
        downColor: "rgba(30, 64, 175, 0.75)",
        borderDownColor: "rgba(37, 99, 235, 0.95)",
        wickDownColor: "rgba(0, 0, 0, 0)",
      });

      series.applyOptions({
        lastValueVisible: false,
        priceLineVisible: false,
      });

      series.setData(spreadCandles);

      series.createPriceLine({
        price: 1.0,
        color: "#9ca3af",
        lineWidth: 1,
        lineStyle: LightweightCharts.LineStyle.Dashed,
        axisLabelVisible: false,
        title: "",
      });

      const markers = buildMarkers(spreadCandles, item.deal);
      if (markers.length) {
        series.setMarkers(markers);
      }

      const firstTime = spreadCandles[0].time;
      const lastTime = spreadCandles[spreadCandles.length - 1].time;
      chart.timeScale().setVisibleRange({
        from: firstTime,
        to: lastTime,
      });

      item.chartInitialized = true;
      item.chart = chart;
      item.series = series;
    }

    function updateSlider() {
      const total = slideItems.length || 1;
      slidesWrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex === total - 1;
      slideIndexLabel.textContent = `${currentIndex + 1} / ${total}`;
      updateTabsActive();
      initChartForIndex(currentIndex);
    }

    prevBtn.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex -= 1;
        updateSlider();
      }
    });

    nextBtn.addEventListener("click", () => {
      if (currentIndex < slideItems.length - 1) {
        currentIndex += 1;
        updateSlider();
      }
    });

    if (!slideItems.length) {
      slidesWrapper.innerHTML =
        "<div class='slide'><div class='no-data'>Нет сделок в arbDeals.</div></div>";
      prevBtn.disabled = true;
      nextBtn.disabled = true;
      slideIndexLabel.textContent = "0 / 0";
    } else {
      updateSlider();
    }
  </script>
</body>
</html>
